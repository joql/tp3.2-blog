"use strict";function getWidthLeft(o,e){var t=o.position().left,i=o.width(),n={left:t,width:i};if(!e)return n;$(".b-nav-mobile").stop().animate({left:t,width:i},300)}function login(){$("#b-modal-login").modal("show"),setCookie("this_url",window.location.href)}function logout(){$.post(logoutUrl),setTimeout(function(){location.reload()},500)}function goTop(){return $("body,html").animate({scrollTop:0},500),!1}function setCookie(o,e,t){if(t){var i=new Date;i.setTime(i.getTime()+24*t*60*60*1e3);var n="; expires="+i.toGMTString()}else var n="";document.cookie=o+"="+e+n+"; path=/"}function getCookie(o){for(var e=o+"=",t=document.cookie.split(";"),i=0;i<t.length;i++){for(var n=t[i];" "==n.charAt(0);)n=n.substring(1,n.length);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null}function deleteCookie(o){setCookie(o,"",-1)}function recordId(o,e){return setCookie("cid",0),setCookie("tid",0),setCookie("search_word",0),"index"!=o&&"/"!=o&&setCookie(o,e),!0}function getCheck(){CodeVal=strRand(),showCheck(CodeVal)}function showCheck(o){CodeVal=o;var e=document.getElementById("myCanvas"),t=e.getContext("2d");t.clearRect(0,0,1e3,1e3),t.font="80px 'Hiragino Sans GB'",t.fillStyle="#E8DFE8",t.fillText(o,0,100)}function strRand(){for(var o="",e=new Array(1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f","g","h","j","k","l","m","n","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","U","V","W","X","Y","Z"),t=0;t<4;t++){var i=Math.floor(60*Math.random());void 0!==e[i]&&(o+=e[i])}return o.length<4&&(o=strRand()),o}function reg(){$("#b-modal-reg").modal("show")}function getRegCheck(){RegCodeVal=strRand(),showRegCheck(RegCodeVal)}function showRegCheck(o){RegCodeVal=o;var e=document.getElementById("myCanvas_reg"),t=e.getContext("2d");t.clearRect(0,0,1e3,1e3),t.font="80px 'Hiragino Sans GB'",t.fillStyle="#E8DFE8",t.fillText(o,0,100)}$(function(){if("block"==$(".b-nav-mobile").css("display")){var o=getWidthLeft($(".b-nav-active"),!1);$(".b-nav-mobile").css({width:o.width,left:o.left})}$(".b-nav-parent li").hover(function(){getWidthLeft($(this),!0)},function(){getWidthLeft($(".b-nav-active"),!0)}),$(".b-article iframe").width("95%"),$(window).scroll(function(o){$(window).scrollTop()>200?($(".go-top").show(),$(".go-top").removeClass("animated rotateOut"),$(".go-top").addClass("animated rotateIn")):($(".go-top").removeClass("animated rotateIn"),$(".go-top").addClass("animated rotateOut"))}),window.innerWidth>=768&&$(window).scroll(function(o){$(window).scrollTop()>100?$("#b-public-nav").stop().animate({"padding-top":"0px","padding-bottom":"0px"},100):$("#b-public-nav").stop().animate({"padding-top":"5px","padding-bottom":"5px"},100)}),$(".b-page .first,.num,.end").addClass("hidden-xs"),$(".b-page .rows").addClass("hidden-xs"),$(".b-chat-middle").height($(".b-chat").height()),$(".b-arrows-right1,.b-arrows-right2").each(function(o,e){$(e).css("top",$(e).parent(".b-chat-one").height()/2.5)}),$.each($(".js-head-img"),function(o,e){var t=$(e).attr("_src");$(e).attr("src",t)})});var CodeVal;getCheck(),$("div#b-modal-login .login_fields__submit input").click(function(){var o=$('div#b-modal-login .login_fields__user input[name="login"]').val(),e=$('div#b-modal-login .login_fields__password input[name="pwd"]').val(),t=$('div#b-modal-login .login_fields__password input[name="code"]').val(),i=location.protocol+"//"+location.host+"/index.php/Home/User/login";return""==o||""==e?void layer.msg("请输入帐号密码"):t.toLowerCase()!=CodeVal.toLowerCase()?void layer.msg("验证码不正确!"):void $.ajax({url:i,type:"post",data:{username:o,password:$.md5(e)},dataType:"json",success:function(o){1==o.code&&location.reload(),layer.msg(o.msg)},error:function(o,e,t){alert(e+"出错！"+t)}})});var RegCodeVal;getRegCheck(),$("div#b-modal-reg .login_fields__submit input").click(function(){var o=$('div#b-modal-reg .login_fields__user input[name="username"]').val(),e=$('div#b-modal-reg .login_fields__password input[name="pwd"]').val(),t=$('div#b-modal-reg .login_fields__password input[name="pwd2"]').val(),i=$('div#b-modal-reg .login_fields__password input[name="code"]').val(),n=location.protocol+"//"+location.host+"/index.php/Home/User/reg";return""==o||""==e?void layer.msg("请输入帐号密码"):e!=t?void layer.msg("两次密码不一致"):i.toLowerCase()!=RegCodeVal.toLowerCase()?void layer.msg("验证码不正确!"):void $.ajax({url:n,type:"post",data:{username:o,password:$.md5(e)},dataType:"json",success:function(o){1==o.code?setTimeout(function(){$("#b-modal-reg").modal("hide"),$("#b-modal-login").modal("show"),layer.msg("注册成功，请登录")},1e3):layer.msg(o.msg)},error:function(o,e,t){alert(e+"出错！"+t)}})});